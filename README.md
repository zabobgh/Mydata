# ระบบจัดการคลังยา รพ.สต.บ้านกาหลง

ระบบสำหรับจัดการสต็อกยา, ติดตามวันหมดอายุ, และสร้างรายงานสำหรับ รพ.สต.บ้านกาหลง ขับเคลื่อนโดย AI เพื่อการวิเคราะห์และให้คำแนะนำ

## คุณสมบัติหลัก

-   จัดการคลังยา (เพิ่ม, แก้ไข, ลบ)
-   ติดตามสถานะสต็อก (มีของ, ใกล้หมด, หมดสต็อก)
-   ติดตามวันหมดอายุ (ใกล้หมดอายุ, หมดอายุแล้ว)
-   ระบบเบิกจ่ายและอนุมัติ
-   รายงานวิเคราะห์คลังยาโดย Gemini AI
-   ผู้ช่วย AI สำหรับสอบถามข้อมูล
-   จัดการผู้ใช้งาน (ผู้ดูแลระบบ, ผู้ใช้งาน)
-   นำเข้าข้อมูลจากไฟล์ Excel

---

## การติดตั้งและรันโปรเจกต์บนเครื่อง (Local Development)

### สิ่งที่ต้องมี:
-   [Node.js](https://nodejs.org/) (เวอร์ชัน 18.x หรือสูงกว่า)
-   [npm](https://www.npmjs.com/) (มาพร้อมกับ Node.js)

### ขั้นตอนการติดตั้ง:

1.  **Clone a repository (ถ้ายังไม่มี):**
    หากคุณดาวน์โหลดโปรเจกต์นี้เป็นไฟล์ zip ให้ข้ามไปขั้นตอนที่ 2.
    ```bash
    git clone <repository-url>
    cd <repository-folder>
    ```

2.  **ติดตั้ง Dependencies:**
    เปิด Terminal หรือ Command Prompt ในโฟลเดอร์ของโปรเจกต์ แล้วรันคำสั่ง:
    ```bash
    npm install
    ```
    คำสั่งนี้จะดาวน์โหลดไลบรารีทั้งหมดที่โปรเจกต์ต้องการ (ตามที่ระบุใน `package.json`).

3.  **สร้าง Environment File:**
    ในโฟลเดอร์หลักของโปรเจกต์ (ที่เดียวกับ `package.json`), ให้สร้างไฟล์ใหม่ขึ้นมาแล้วตั้งชื่อว่า `.env`

4.  **เพิ่ม Environment Variables:**
    เปิดไฟล์ `.env` ที่เพิ่งสร้างขึ้นมา แล้วเพิ่มค่าตัวแปรต่างๆ ลงไปในรูปแบบนี้:
    ```
    # สำหรับ Gemini AI
    VITE_GEMINI_API_KEY=ใส่API_KEYของคุณที่นี่

    # สำหรับเชื่อมต่อ Vercel KV บน Local (ดูขั้นตอนในหัวข้อ Vercel KV)
    KV_URL=
    KV_REST_API_URL=
    KV_REST_API_TOKEN=
    KV_REST_API_READ_ONLY_TOKEN=
    ```
    **สำคัญ:** ชื่อตัวแปรสำหรับ Client-side ต้องขึ้นต้นด้วย `VITE_` เสมอเพื่อให้ Vite สามารถเข้าถึงได้

5.  **รัน Development Server:**
    รันคำสั่งนี้ใน Terminal:
    ```bash
    npm run dev
    ```
    จากนั้นเปิดเบราว์เซอร์แล้วไปที่ `http://localhost:5173` (หรือตามที่อยู่เว็บที่ Terminal แสดงขึ้นมา).

---

## การนำแอปพลิเคชันขึ้น Vercel (Deployment)

1.  **เตรียม Repository:**
    -   ตรวจสอบให้แน่ใจว่าโค้ดทั้งหมดของคุณอยู่บน Repository ของ GitHub แล้ว

2.  **สมัครและเชื่อมต่อ Vercel:**
    -   ไปที่ [vercel.com](https://vercel.com/) และสมัครใช้งานด้วยบัญชี GitHub ของคุณ
    -   ในหน้า Dashboard ของ Vercel, คลิก "Add New..." -> "Project"
    -   เลือก GitHub repository ของโปรเจกต์นี้แล้วคลิก "Import"

3.  **ตั้งค่าโปรเจกต์:**
    -   **Framework Preset:** Vercel ควรจะตรวจจับว่าเป็น `Vite` โดยอัตโนมัติ
    -   **Environment Variables (สำคัญมาก!):**
        -   เลื่อนลงมาหาหัวข้อ "Environment Variables"
        -   ในช่อง **Name** ให้ใส่ `VITE_GEMINI_API_KEY` และในช่อง **Value** ให้ใส่ **Gemini API Key** ของคุณ
        -   กด "Add" เพื่อบันทึก

4.  **เชื่อมต่อกับ Vercel KV (ฐานข้อมูล):**
    -   ในหน้า Dashboard ของโปรเจกต์บน Vercel, ไปที่แท็บ **"Storage"**
    -   คลิก "Create Database" และเลือก **"KV (Serverless Redis)"**
    -   เลือก Region ที่ใกล้ที่สุด และตั้งชื่อ (เช่น `drug-inventory-db`) แล้วกด "Create"
    -   ในหน้าถัดไป, คลิก **"Connect"** เพื่อเชื่อมต่อฐานข้อมูลเข้ากับโปรเจกต์ของคุณ
    -   Vercel จะทำการเพิ่ม Environment Variables ที่จำเป็น (เช่น `KV_URL`, `KV_REST_API_URL`, `KV_REST_API_TOKEN`) ให้กับโปรเจกต์โดยอัตโนมัติ แพ็คเกจ `@vercel/kv` จะใช้ค่าเหล่านี้ในการเชื่อมต่อ

5.  **Deploy:**
    -   ไปที่แท็บ "Deployments" ของโปรเจกต์คุณ และทำการ Redeploy เพื่อให้การตั้งค่า Environment Variables และการเชื่อมต่อ KV มีผล
    -   เมื่อเสร็จแล้ว คุณจะได้รับ URL สาธารณะสำหรับเข้าใช้งานแอปพลิเคชันของคุณ!

### (ทางเลือก) การรัน Vercel KV บนเครื่อง Local
เพื่อให้สามารถพัฒนาและทดสอบฟังก์ชันที่เชื่อมต่อกับ KV บนเครื่องของคุณได้:
1.  ในหน้า Storage ของโปรเจกต์บน Vercel (ที่สร้าง KV ไว้แล้ว), เลือกแท็บ **`.env.local`**
2.  คัดลอกค่าทั้งหมดที่ Vercel เตรียมไว้ให้
3.  นำไปวางในไฟล์ `.env` ในโปรเจกต์บนเครื่องของคุณ
4.  เมื่อรัน `npm run dev` โค้ดของคุณจะสามารถเชื่อมต่อกับฐานข้อมูล KV บน Vercel ได้โดยตรง
